##############################################################################
#
# Jib is a notebook computing environment aiming to support
#
#   * Jupyter notebooks including
#        - Python, R, and Scala kernels
#        - Support for launching dynamic Spark clusters
#
#   * A parallel computing capability including
#        - An Apache Spark cluster
#        - The Alluxio clustered memory cache
#        - The Minio S3 storage system
#
#   * Specialized resource access via Kubernetes
#        - CPU, GPU, and Shared memory capabilities
#        - Ability to dynamically launch Spark clusters
#        - Fault tolerance for all services.
#        - Extensive management, automation, and monitoring tools
#
##############################################################################
singleuser:
  ##############################################################################
  #
  # S T O R A G E
  #
  # Configures shared memory and shared persistent storage for all notebooks.
  #
  ##############################################################################
  storage:
    extraVolumes:
      - name: "jupyterhub-shared"
        persistentVolumeClaim:
        claimName: # A RWM persistent volume claim. Configure.
      - name: "shared-memory-volume"
        emptyDir:
          medium: "Memory"
    extraVolumeMounts:
      - name: "jupyterhub-shared"
        mountPath: "/home/shared"
      - name: "shared-memory-volume"
        mountPath: "/dev/shm"
  ##############################################################################
  #
  # C P U  &  M E M O R Y 
  #
  # Configures default notebook CPU and memory settings.
  #
  ##############################################################################
  cpu:
    limit: .5
    guarantee: .5
  memory:
    limit: 1G
    guarantee: 1G
  ##############################################################################
  #
  # D E F A U L T   N O T E B O O K 
  #
  # Configures the default notebook image.
  #
  ##############################################################################
  image:
    name: "heliumdatastage/all-spark-notebook"
    tag: "v0.1"
  profileList:
    ##############################################################################
    #
    # P R O F I L E S
    #
    # Configure each profile including alternative notebooks.
    #
    ##############################################################################
    - display_name: "Python / R / Scala Spark Notebook"
      description: "Python / R / Scala Spark Notebook"
      default: true
      kubespawner_override:
        service_account: spark
    - display_name: "Python / R / Scala Spark Notebook with a Single GPU"
      description: "Python / R / Scala Spark Notebook with a Single GPU"
      kubespawner_override:
        service_account: spark
        extra_resource_limits:
          nvidia.com/gpu: "1"
    - display_name: "Data science kernels and tools: Python, R, and Julia."
      description: "Data science kernels and tools: Python, R, and Julia."
      kubespawner_override:
        image: jupyter/datascience-notebook:dc9744740e12
        cpu:
          limit: 2
          guarantee: 2
        memory:
          limit: 5G
          guarantee: 5G
    - display_name: "Tensorflow and Keras machine learning libraries."
      description: "Tensorflow and Keras machine learning libraries."
      kubespawner_override:
        image: jupyter/tensorflow-notebook:dc9744740e12
    - display_name: "Datascience Environment with a Single GPU"
      description: "Datascience Environment with a Single GPU"
      kubespawner_override:
        image: jupyter/datascience-notebook:dc9744740e12
        extra_resource_limits:
          nvidia.com/gpu: "1"

##############################################################################
#
# S E C R E T   T O K E N
#
# This token is generated by reading ~/.jib
# during install.
#
# ~/.jib must contain a single line that is the token.
#
##############################################################################
proxy:
  secretToken: ""
